<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soccer AI Analytics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .sidebar-transition { transition: all 0.3s ease; }
        .sidebar-closed { transform: translateX(-100%); width: 0; overflow: hidden; }
        .active-link { background: rgba(16, 185, 129, 0.1); color: #10b981; border: 1px solid rgba(16, 185, 129, 0.2); }
    </style>
</head>
<body class="bg-slate-900 text-white font-sans flex h-screen overflow-hidden">

    <aside id="sidebar" class="w-72 bg-slate-800 border-r border-slate-700 flex flex-col shrink-0 sidebar-transition z-50">
        <div class="p-6 border-b border-slate-700 flex justify-between items-center">
            <h1 class="text-xl font-black text-emerald-400 italic uppercase tracking-tighter">Soccer AI</h1>
            <button onclick="toggleMenu()" class="text-slate-400 hover:text-white lg:hidden">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <nav class="flex-1 p-4 space-y-2">
            <p class="text-slate-500 text-[10px] font-bold uppercase px-2 mb-2 tracking-widest">Análise</p>
            <button onclick="showSection('youtube')" id="btn-youtube" class="w-full flex items-center gap-3 p-3 rounded-xl transition active-link group">
                <i class="fab fa-youtube group-hover:text-red-500"></i> <span class="text-sm font-semibold">YouTube Engine</span>
            </button>
            <button onclick="showSection('local')" id="btn-local" class="w-full flex items-center gap-3 p-3 rounded-xl text-slate-400 hover:bg-slate-700/50 transition">
                <i class="fas fa-file-video"></i> <span class="text-sm font-semibold">Vídeo Local</span>
            </button>
        </nav>
    </aside>

    <main class="flex-1 flex flex-col min-w-0">
        <header class="h-16 border-b border-slate-700 flex items-center px-6 gap-4 bg-slate-900/50 backdrop-blur-md">
            <button onclick="toggleMenu()" class="p-2 hover:bg-slate-800 rounded-lg text-emerald-400 transition">
                <i class="fas fa-bars text-xl"></i>
            </button>
            <h2 class="font-bold text-slate-300 uppercase tracking-widest text-xs">Dashboard / <span id="section-title">YouTube Engine</span></h2>
        </header>

        <div class="p-8 overflow-y-auto flex-1">
            <div id="section-youtube" class="max-w-4xl mx-auto space-y-8">
                <div class="bg-slate-800 p-8 rounded-[2.5rem] border border-slate-700 shadow-2xl">
                    <h3 class="text-2xl font-bold mb-6">Análise via Link</h3>
                    <div class="flex flex-col md:flex-row gap-4">
                        <input type="text" id="youtube-url" placeholder="URL do vídeo (YouTube)..." 
                               class="flex-1 bg-slate-950 border border-slate-700 rounded-2xl px-6 py-4 outline-none focus:border-red-500 transition shadow-inner">
                        <button onclick="processarIA()" id="btn-processar" class="bg-red-600 hover:bg-red-500 px-8 py-4 rounded-2xl font-black uppercase text-xs tracking-widest transition flex items-center justify-center gap-2">
                            <span>Processar IA</span> <i class="fas fa-bolt"></i>
                        </button>
                    </div>
                </div>

                <div id="result-container" class="hidden animate-in fade-in zoom-in duration-700">
                    <div class="bg-black rounded-[2.5rem] border-2 border-emerald-500/20 overflow-hidden shadow-2xl">
                        <div class="p-4 bg-slate-800/50 border-b border-slate-700 flex justify-between items-center px-8">
                            <span class="text-xs font-mono text-emerald-400 uppercase tracking-widest">Mapa de Calor Gerado</span>
                            <button class="text-slate-400 hover:text-white text-sm"><i class="fas fa-download"></i></button>
                        </div>
                        <img id="heatmap-img" src="" class="w-full h-auto">
                    </div>
                </div>
            </div>

            <div id="section-local" class="hidden flex items-center justify-center h-full">
                <p class="text-slate-500 italic">Módulo de vídeo local em desenvolvimento...</p>
            </div>
        </div>
    </main>

    <script>
        function toggleMenu() {
            document.getElementById('sidebar').classList.toggle('sidebar-closed');
        }

        function showSection(type) {
            document.getElementById('section-youtube').classList.toggle('hidden', type !== 'youtube');
            document.getElementById('section-local').classList.toggle('hidden', type !== 'local');
            document.getElementById('section-title').innerText = type === 'youtube' ? 'YouTube Engine' : 'Vídeo Local';
        }

        async function processarIA() {
            const url = document.getElementById('youtube-url').value;
            const btn = document.getElementById('btn-processar');
            if(!url) return alert("Insira uma URL válida!");

            btn.innerHTML = `<i class="fas fa-spinner animate-spin"></i> PROCESSANDO...`;
            btn.disabled = true;

            try {
                const response = await fetch('http://localhost:5000/processar', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ url: url })
                });
                const data = await response.json();
                
                if(data.heatmap_url) {
                    document.getElementById('heatmap-img').src = data.heatmap_url;
                    document.getElementById('result-container').classList.remove('hidden');
                } else {
                    alert("Erro no processamento: " + data.mensagem);
                }
            } catch (e) {
                alert("Erro: O servidor Python (app.py) não está rodando no seu PC!");
            } finally {
                btn.innerHTML = `<span>Processar IA</span> <i class="fas fa-bolt"></i>`;
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
